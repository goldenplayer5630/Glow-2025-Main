<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:Flower.App.ViewModels"
             mc:Ignorable="d"
             x:Class="Flower.App.Views.LoadFlowersView"
             x:DataType="vm:ILoadFlowerViewModel">
<UserControl.Styles>
    <Style Selector="Button">
      <Setter Property="FontSize" Value="18"/>
      <Setter Property="MinHeight" Value="56"/>
      <Setter Property="MinWidth" Value="140"/>
      <Setter Property="Padding" Value="16,10"/>
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="HorizontalContentAlignment" Value="Center"/>
      <Setter Property="VerticalContentAlignment" Value="Center"/>
    </Style>

    <!-- ComboBox -->
    <Style Selector="ComboBox">
      <Setter Property="FontSize" Value="18"/>
      <Setter Property="MinHeight" Value="48"/>
      <Setter Property="Padding" Value="12,8"/>
      <Setter Property="MinWidth" Value="220"/>
      <Setter Property="HorizontalContentAlignment" Value="Left"/>
      <Setter Property="VerticalContentAlignment" Value="Center"/>
    </Style>

    <Style Selector="ListBoxItem">
      <Setter Property="MinHeight" Value="48"/>
      <Setter Property="Padding" Value="10,8"/>
      <Setter Property="FontSize" Value="16"/>
    </Style>
    <Style Selector="TextBlock.header">
      <Setter Property="FontSize" Value="18"/>
      <Setter Property="FontWeight" Value="SemiBold"/>
    </Style>
  </UserControl.Styles>
  <!-- Grid has no Padding; wrap in a Border -->
  <Border Padding="16">
    <Grid RowDefinitions="Auto,*,Auto" ColumnDefinitions="*">
      <!-- Header -->
      <StackPanel Orientation="Vertical" Spacing="8">
        <TextBlock Text="Select a show to load" FontSize="18" FontWeight="SemiBold"/>
        <TextBlock Text="{Binding FolderHint}" Opacity="0.7"/>
      </StackPanel>

      <!-- List -->
      <ListBox Grid.Row="1"
               ItemsSource="{Binding Shows}"
               SelectedItem="{Binding SelectedShow, Mode=TwoWay}"
               Margin="0,12,0,12">
        <ListBox.ItemTemplate>
          <!-- Use compiled binding only if vm:ShowFileItem resolves -->
          <DataTemplate x:DataType="vm:ShowFileItem">
            <StackPanel Orientation="Vertical" Margin="6">
              <TextBlock Text="{Binding DisplayName}" FontWeight="SemiBold"/>
              <TextBlock Text="{Binding Path}" FontSize="12" Opacity="0.65"/>
            </StackPanel>
          </DataTemplate>
        </ListBox.ItemTemplate>
      </ListBox>

      <!-- Footer buttons -->
      <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8">
        <Button Content="Refresh" Command="{Binding RefreshCommand}"/>
        <Button Content="Browse..." Command="{Binding BrowseFolderCommand}"/>
        <Button Content="Cancel" Command="{Binding CancelCommand}"/>
        <Button Content="Load"
                Command="{Binding LoadCommand}"
                IsDefault="True"
                IsEnabled="{Binding CanLoad}"/>
      </StackPanel>
    </Grid>
  </Border>
</UserControl>
